---

title: Title

keywords: fastai
sidebar: home_sidebar

summary: "summary"
description: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: sandbox.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#all_flag</span>
<span class="kn">from</span> <span class="nn">nbdev.showdoc</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">medtop.core</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="p">,</span> <span class="n">doc_df</span> <span class="o">=</span> <span class="n">import_docs</span><span class="p">(</span><span class="s1">&#39;test_data/corpus_file_list.txt&#39;</span><span class="p">)</span>
<span class="n">tfidf</span><span class="p">,</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="n">create_tfidf</span><span class="p">(</span><span class="n">doc_df</span><span class="p">,</span> <span class="s1">&#39;test_data/seed_topics_file_list.txt&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">get_phrases</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">token2id</span><span class="p">,</span> <span class="n">tfidf</span><span class="p">,</span> <span class="n">include_input_in_tfidf</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">get_vectors</span><span class="p">(</span><span class="s2">&quot;tfidf&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">tfidf</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">assign_clusters</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;kmeans&quot;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">cluster_df</span> <span class="o">=</span> <span class="n">get_cluster_topics</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">doc_df</span><span class="p">)</span>
<span class="n">cluster_df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Removed 43 sentences without phrases.
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cluster</th>
      <th>topics</th>
      <th>sent_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>[felt, joy, got, guilt, found, forgot, shame, ...</td>
      <td>37</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>[felt, sadness, heard, died, home, dog, friend...</td>
      <td>14</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>[felt, guilt, joy, shame, sadness, friend, old...</td>
      <td>87</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>[felt, guilt, lost, joy, managed, sadness, lie...</td>
      <td>16</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="visualize_clustering" class="doc_header"><code>visualize_clustering</code><a href="https://github.com/etfrenchvcu/medtop/tree/master/medtop/core.py#L233" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>visualize_clustering</code>(<strong><code>data</code></strong>:<code>DataFrame</code>, <strong><code>method</code></strong>:<code>str</code>=<em><code>'umap'</code></em>, <strong><code>dist_metric</code></strong>:<code>str</code>=<em><code>'cosine'</code></em>, <strong><code>umap_neighbors</code></strong>:<code>int</code>=<em><code>15</code></em>, <strong><code>show_chart</code></strong>=<em><code>True</code></em>, <strong><code>save_chart</code></strong>=<em><code>False</code></em>, <strong><code>chart_file</code></strong>=<em><code>'cluster_visualization.html'</code></em>)</p>
</blockquote>
<p>Visualize clustering in two dimensions.</p>
<p>Options for <code>method</code> are ('umap', 'mds', 'svd'). Options for <code>dist_metric</code> are ('cosine' or anything accepted by
sklearn.metrics.pairwise_distances). When <code>show_chart</code> is True, the visualization is shown inline.
When <code>save_chart</code> is True, the visualization is saved to <code>chart_file</code>.</p>
<p>Returns None</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Cluster documents</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">get_phrases</span><span class="p">(</span><span class="n">doc_df</span><span class="p">,</span> <span class="n">dictionary</span><span class="o">.</span><span class="n">token2id</span><span class="p">,</span> <span class="n">tfidf</span><span class="p">,</span> <span class="n">include_input_in_tfidf</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">get_vectors</span><span class="p">(</span><span class="s2">&quot;tfidf&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">tfidf</span> <span class="o">=</span> <span class="n">tfidf</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">assign_clusters</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;kmeans&quot;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">doc_id</span>
<span class="n">visualize_clustering</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;umap&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Removed 0 sentences without phrases.
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>C:\Users\etfrench\Anaconda3\lib\site-packages\umap\umap_.py:1383: UserWarning:

n_neighbors is larger than the dataset size; truncating to X.shape[0] - 1

</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
        
        
            <div id="b9808ca4-d69d-4426-a11a-fcda022327f6" class="plotly-graph-div" style="height:525px; width:100%;"></div>
            <script type="text/javascript">
                require(["plotly"], function(Plotly) {
                    window.PLOTLYENV=window.PLOTLYENV || {};
                    
                if (document.getElementById("b9808ca4-d69d-4426-a11a-fcda022327f6")) {
                    Plotly.newPlot(
                        'b9808ca4-d69d-4426-a11a-fcda022327f6',
                        [{"customdata": [[["felt", "guilt", "caught", "lying", "diary", "engagement", "escape", "celebration", "meal", "inlaws", "felt", "joy", "going", "south", "africa", "see", "partner", "waiting", "uk", "visa", "seen", "excited", "see", "ambut", "visit", "country", "wide", "variety", "place", "go", "see", "felt", "joy", "going", "see", "favourite", "music", "artist", "perform", "live", "felt", "shame", "able", "answer", "simple", "question", "exam", "felt", "joy", "offered", "promotion", "work", "head", "department", "felt", "guilt", "supposed", "buy", "urgent", "item", "partner", "forgot", "shop", "closed", "time", "remembered", "felt", "guilt", "unable", "attend", "son\u2019t", "concert", "work", "commitment", "felt", "guilt", "mother", "died", "felt", "guilt", "witnessed", "event", "vandalism", "group", "youth", "piece", "lifesaving", "equipment", "today", "stop", "try", "correct", "damage", "felt", "joy", "raffle", "prize", "felt", "joy", "colleague", "mine", "known", "announced", "wife", "finally", "expecting", "child", "unsuccessfully", "trying", "felt", "sadness", "guy", "dating", "suddenly", "changed", "went", "cold", "idea", "felt", "shame", "school", "took", "friend", "book", "backpack", "felt", "joy", "funny", "dad", "gave", "puppy", "felt", "guilt", "grandmother", "ago", "nursing", "home", "given", "short", "time", "li", "haveas", "ill", "died", "mum", "phoned", "tell", "gotten", "worse", "come", "see", "took", "time", "thinking", "hour", "make", "difference", "arrived", "le", "minute", "passed", "away", "felt", "joy", "boyfriend", "proposed", "birthday", "felt", "joy", "child", "loved", "christmas", "gift", "almost", "tear", "joy", "felt", "sadness", "child", "sad", "beloved", "pet", "died", "suddenly", "sadness", "pet", "dying", "childrens", "sadness", "felt", "shame", "country", "treating", "eu", "citizen", "terribly", "felt", "joy", "daughter", "managed", "achieve", "amazing", "result", "international", "competition", "creatives"], 3], [["felt", "joy", "daughter", "scored", "highest", "percentile", "test", "designed", "see", "well", "may", "exam", "decide", "high", "school", "felt", "joy", "daughter", "handpicked", "travel", "abroad", "prepare", "advertising", "campaign", "well", "known", "charity", "felt", "shame", "dog", "aggressi", "havewith", "another", "smaller", "dog", "obvious", "reason", "felt", "sadness", "dog", "ill", "put", "sleep", "felt", "sadness", "friend", "died", "secret", "battle", "breast", "cancer", "felt", "sadness", "friend", "going", "li", "haveabroad", "felt", "joy", "grand", "daughter", "born", "via", "emergency", "c", "section", "felt", "guilt", "grandfather", "passed", "away", "want", "dri", "havein", "early", "hour", "morning", "felt", "sadness", "mother", "died", "cancer", "felt", "joy", "son", "finished", "essay", "time", "master", "degree", "real", "achievement", "felt", "joy", "son", "gave", "big", "hug", "got", "home", "work", "felt", "joy", "son", "got", "job", "utilised", "degree", "felt", "joy", "son", "picked", "outstanding", "student", "university", "felt", "sadness", "child", "world", "suffering", "hardship", "real", "future", "whilst", "son", "incapable", "appreciating", "advantage", "felt", "sadness", "death", "grandad", "felt", "shame", "people", "knew", "seeing", "ill", "brother", "often", "felt", "sadness", "family", "dog", "died", "felt", "sadness", "woman", "love", "rejected", "feeling", "walking", "met", "together", "good", "felt", "sadness", "beautiful", "tortoiseshell", "white", "cat", "loving", "felt", "joy", "managed", "mother", "bat", "collect", "baby", "lost", "fly"], 0], [["felt", "guilt", "letting", "sister", "help", "sort", "bedroom", "offered", "felt", "joy", "dancing", "gloucester", "place", "london", "man", "loved", "felt", "guilt", "denying", "offer", "kid", "demanded", "felt", "shame", "giving", "cheque", "managing", "agent", "cover", "owed", "felt", "joy", "lying", "yacht", "sweeping", "though", "wave", "southern", "brazil", "cold", "beer", "hand", "felt", "joy", "cycling", "local", "nature", "reserve", "photo", "getting", "perfect", "weather", "condition", "arrived", "felt", "guilt", "occasion", "took", "name", "jesus", "christ", "vain", "attempt", "impress", "lady", "big", "shot", "felt", "guilt", "christmas", "life", "alone", "spending", "christmas", "felt", "guilt", "night", "younger", "went", "night", "drinking", "friend", "ended", "dancing", "kissing", "girl", "club", "despite", "fact", "already", "girlfriend", "felt", "guilt", "next", "couple", "broke", "girlfriend", "next", "time", "spoke", "felt", "joy", "reading", "life", "kardashians", "felt", "shame", "reading", "suffering", "slave", "middle", "passage", "read", "university", "felt", "joy", "riffing", "song", "man", "loved", "outside", "pub", "chelsea", "felt", "guilt", "snogging", "friend", "girlfriend", "felt", "guilt", "failed", "pay", "back", "loan", "parent", "preferring", "assume", "forgotten", "rather", "reminded", "subject", "opportunity", "arose", "felt", "guilt", "promised", "make", "charitable", "donation", "christmas", "instead", "buying", "particular", "present", "somebody", "never", "actually", "got", "around", "felt", "guilt", "lied", "consuming", "last", "milk", "morning", "letting", "son", "take", "blame", "mother", "felt", "guilt", "lied", "employment", "experience", "job", "application", "letter", "felt", "guilt", "moan", "life", "essentially", "privileged", "comfortable", "real", "poverty", "world", "even", "street", "city", "felt", "guilt", "moved", "away", "another", "country", "family", "met", "partner", "felt", "joy", "received", "valentines", "card", "happened", "recognise", "handwriting", "girl", "huge", "crush"], 2], [["felt", "sadness", "friend", "pet", "rabbit", "put", "sleep", "although", "fine", "age", "always", "wonderfully", "cared", "felt", "shame", "member", "staff", "nice", "able", "afford", "showed", "suited", "felt", "sadness", "ten", "anniversary", "grandad", "funeral", "feel", "every", "though", "particular", "milestone", "seemed", "extra", "upsetting", "felt", "sadness", "partner", "grandma", "miss", "company", "cat", "consider", "getting", "fear", "might", "happen", "gone", "felt", "shame", "neighbour", "small", "village", "lived", "knew", "ex", "husband", "messing", "around", "internet", "chatting", "woman", "felt", "shame", "teen", "never", "well", "school", "felt", "joy", "brought", "home", "rescue", "kitten", "shelter", "let", "carrier", "felt", "sadness", "today", "thought", "anniversary", "today", "felt", "sadness", "visiting", "house", "grew", "parent", "built", "changed", "recognition", "developed", "considerably", "felt", "joy", "watching", "sapphire", "ring", "sparkle", "sunshine", "felt", "guilt", "argued", "old", "woman", "called", "stupid", "felt", "guilt", "ate", "daughter", "burger", "mcdonald", "upset", "felt", "guilt", "ate", "large", "amount", "cake", "felt", "guilt", "ate", "whole", "easter", "egg", "go", "felt", "guilt", "ate", "last", "burrito", "belonged", "sister", "felt", "shame", "attempted", "steal", "book", "store", "felt", "joy", "bet", "felt", "joy", "bought", "home", "felt", "guilt", "broke", "glass", "cabinet", "party", "felt", "sadness", "broke", "phone"], 1], [["felt", "guilt", "bumped", "neighbour", "supermarket", "usually", "ignore", "let", "kid", "run", "riot", "felt", "guilt", "maybe", "unnecessarily", "harsh", "felt", "guilt", "called", "sick", "work", "wasn\u2019t", "sick", "felt", "sadness", "came", "across", "dead", "cat", "bit", "motorway", "driving", "earlier", "felt", "joy", "came", "home", "hospital", "greeted", "beautiful", "dog", "missed", "dearly", "felt", "shame", "cheated", "exam", "caught", "felt", "joy", "completed", "long", "mountain", "trek", "charity", "felt", "utter", "joy", "finished", "felt", "joy", "completed", "half", "marathon", "felt", "shame", "pay", "service", "charge", "bill", "money", "felt", "shame", "pay", "electric", "bill", "reminder", "money", "felt", "guilt", "visit", "relati", "havebecause", "ill", "felt", "joy", "cycled", "mountain", "scotland", "felt", "guilt", "decided", "go", "cousin", "wedding", "exhausted", "couldn\u2019t", "find", "anyone", "look", "sick", "parent", "time", "felt", "guilt", "round", "minute", "meeting", "almost", "felt", "sadness", "money", "ticket", "go", "see", "parent", "often", "felt", "guilt", "volunteer", "dri", "havemy", "parent", "back", "london", "said", "mum", "want", "dad", "dri", "havein", "dark", "felt", "sadness", "hear", "old", "friend", "messaged", "wish", "happy", "christmas", "felt", "shame", "didn\u2019t", "well", "exam", "felt", "guilt", "didn\u2019t", "take", "cat", "vet", "got", "ill", "felt", "sadness", "discovered", "health", "problem", "although", "serious", "limit", "life", "little", "signifies", "getting", "old", "felt", "shame", "drank", "fell", "asleep"], 0], [["felt", "guilt", "encouraged", "mother", "report", "dangerous", "driver", "got", "attacked", "nearly", "died", "driver", "police", "told", "person", "reported", "felt", "shame", "failed", "ninth", "high", "school", "felt", "shame", "farted", "front", "boy", "liked", "drama", "class", "felt", "humiliated", "felt", "joy", "finally", "got", "child", "bed", "long", "felt", "joy", "finally", "managed", "complete", "undergraduate", "degree", "felt", "joy", "finally", "started", "complete", "postgraduate", "degree", "felt", "guilt", "forgot", "hairdresser", "appointment", "felt", "guilt", "forgot", "relative", "birthday", "felt", "guilt", "forgot", "anniversary", "felt", "guilt", "forgot", "wedding", "anniversary", "felt", "guilt", "forgot", "errand", "promised", "friend", "felt", "guilt", "forgot", "pick", "someone", "lift", "felt", "guilt", "forgot", "set", "alarm", "hour", "late", "go", "let", "mum", "dog", "walk", "feed", "felt", "guilt", "forgot", "take", "christmas", "present", "sister", "left", "home", "generously", "hosting", "christmas", "house", "felt", "guilt", "forgot", "take", "son", "football", "match", "read", "message", "text", "group", "carefully", "enough", "felt", "joy", "found", "paperback", "looking", "charity", "shop", "excellent", "condition", "cheaper", "cost", "buy", "online", "felt", "joy", "found", "rare", "item", "wanted", "long", "time", "felt", "joy", "found", "twenty", "pound", "note", "ground", "outside", "felt", "guilt", "found", "money", "hand", "felt", "sadness", "found", "favourite", "shop", "shut"], 0], [["felt", "joy", "found", "old", "son", "girlfriend", "going", "meet", "herjoyhe", "happy", "telling", "news", "filled", "joy", "see", "amso", "happy", "felt", "guilt", "found", "daughter", "difficult", "time", "realise", "straight", "away", "going", "felt", "joy", "found", "money", "street", "felt", "shame", "gave", "away", "gift", "person", "found", "felt", "joy", "gave", "birth", "child", "think", "got", "joy", "child", "worrying", "process", "felt", "joy", "got", "number", "lottery", "ticket", "felt", "joy", "got", "cricket", "bat", "birthday", "young", "felt", "joy", "got", "job", "felt", "shame", "got", "caught", "drink", "driving", "felt", "shame", "got", "drunk", "squeezed", "stranger", "bum", "shame", "time", "definitely", "next", "sobered", "felt", "shame", "got", "intoxicated", "lively", "work", "christmas", "party", "said", "rather", "unwise", "senior", "colleague", "felt", "joy", "got", "married", "felt", "joy", "got", "married", "felt", "joy", "got", "rescue", "cat", "felt", "joy", "got", "see", "family", "especially", "little", "niece", "christmas", "felt", "guilt", "car", "accident", "put", "teenager", "boy", "hospital", "felt", "joy", "fab", "night", "family", "friend", "felt", "guilt", "affair", "told", "husband", "online", "i\u2019d", "never", "met", "man", "question", "felt", "guilt", "extra", "marital", "affair", "felt", "guilt", "extra", "marital", "affair"], 0], [["felt", "joy", "bean", "soup", "felt", "joy", "child", "pure", "feeling", "pain", "finally", "see", "bundle", "arm", "felt", "joy", "exam", "result", "passed", "staff", "nurse", "training", "felt", "sadness", "attend", "grandmother", "funeral", "felt", "shame", "file", "divorce", "petition", "reveal", "cause", "marriage", "failed", "felt", "sadness", "dog", "put", "sleep", "felt", "guilt", "leave", "dog", "whilst", "went", "holiday", "felt", "sadness", "leave", "go", "home", "christmas", "knew", "miss", "family", "going", "back", "home", "christmas", "felt", "sadness", "return", "home", "particularly", "good", "break", "away", "felt", "sadness", "tell", "old", "friend", "seen", "someone", "known", "well", "died", "cancer", "felt", "shame", "drink", "pub", "fell", "go", "hospital", "felt", "shame", "clothing", "malfunction", "resulted", "showing", "wanted", "felt", "sadness", "heard", "family", "friend", "always", "nice", "died", "felt", "sadness", "heard", "celebrity", "recently", "died", "felt", "sadness", "heard", "dog", "attacked", "another", "larger", "dog", "died", "injury", "felt", "sadness", "heard", "old", "work", "colleague", "died", "felt", "joy", "heard", "friend", "given", "birth", "twin", "mother", "baby", "well", "felt", "sadness", "heard", "husband", "mother", "go", "back", "hospital", "home", "appearing", "well", "felt", "sadness", "heard", "story", "little", "girl", "radio", "asked", "charity", "job", "family", "afford", "food", "felt", "guilt", "inadvertently", "failed", "pay", "charge", "carrier", "bag", "using", "self", "service", "checkout", "machine", "local", "supermarket"], 0], [["felt", "guilt", "inadvertently", "stole", "air", "freshener", "car", "felt", "joy", "knew", "going", "back", "florida", "earlier", "thought", "felt", "guilt", "laughed", "milkman", "falling", "felt", "guilt", "left", "mother", "dealing", "father", "illness", "felt", "sadness", "left", "old", "job", "ill", "health", "felt", "guilt", "lied", "reliability", "hand", "bicycle", "sold", "neglecting", "mention", "problem", "crankset", "felt", "guilt", "lied", "friend", "said", "going", "wasn\u2019t", "felt", "guilt", "lied", "partner", "felt", "guilt", "lied", "wife", "felt", "sadness", "looked", "bank", "statement", "saw", "end", "overdrawn", "felt", "sadness", "lost", "cherished", "piece", "jewellery", "given", "relative", "felt", "guilt", "lost", "necklace", "friend", "lent", "felt", "sadness", "lost", "dad", "felt", "guilt", "lost", "sister", "necklace", "borrowed", "felt", "shame", "made", "mistake", "work", "lost", "company", "money", "felt", "guilt", "made", "mistake", "work", "somebody", "else", "blamed", "felt", "joy", "managed", "complete", "cryptic", "crossword", "felt", "joy", "managed", "task", "done", "wanted", "without", "sidetracked", "giving", "felt", "joy", "met", "old", "friend", "hadn\u2019t", "seen", "felt", "guilt", "offended", "young", "woman"], 0], [["felt", "shame", "offended", "old", "man", "supermarket", "felt", "shame", "offended", "old", "man", "felt", "joy", "opened", "alevel", "result", "achieved", "good", "enough", "grade", "choice", "university", "felt", "joy", "opened", "christmas", "present", "got", "everything", "list", "felt", "guilt", "overate", "snack", "felt", "guilt", "overindulged", "felt", "guilt", "participated", "gossip", "work", "felt", "joy", "passed", "nursing", "exam", "become", "qualified", "staff", "nurse", "felt", "joy", "passed", "driving", "test", "forth", "attempt", "felt", "joy", "passed", "exam", "felt", "joy", "pounced", "friend", "started", "kissing", "felt", "shame", "pretended", "le", "able", "bodied", "seat", "busy", "train", "felt", "guilt", "ran", "bird", "road", "felt", "sadness", "read", "article", "times", "david", "baddiel", "cat", "dying", "felt", "guilt", "realised", "boasting", "holiday", "look", "forward", "remembered", "best", "friend", "afford", "felt", "guilt", "realised", "forgotten", "best", "friend", "birthday", "tough", "never", "forgets", "birthday", "special", "event", "felt", "joy", "realised", "le", "xmas", "felt", "shame", "realized", "pulled", "pair", "pant", "bag", "getting", "wallet", "felt", "shame", "realized", "selfish", "someone", "recently", "felt", "guilt", "recall", "cheated", "husband", "something", "never", "done", "wish", "hadn\u2019t"], 0]], "hoverlabel": {"namelength": 0}, "hovertemplate": "<b>%{hovertext}</b><br><br>x=%{x}<br>y=%{y}<br>phrase=%{customdata[0]}<br>cluster=%{marker.color}", "hovertext": [0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0], "legendgroup": "", "marker": {"color": [3, 0, 2, 1, 0, 0, 0, 0, 0, 0], "coloraxis": "coloraxis", "symbol": "circle"}, "mode": "markers", "name": "", "showlegend": false, "type": "scatter", "x": [3.8803184032440186, 3.2460811138153076, 5.520529270172119, 3.780378818511963, 3.987670421600342, 4.467838764190674, 5.1600871086120605, 3.24920654296875, 4.621055603027344, 4.601909637451172], "xaxis": "x", "y": [4.066352367401123, 4.636159420013428, 4.576733112335205, 6.120074272155762, 5.267151355743408, 3.527247905731201, 3.947666883468628, 5.457422256469727, 5.638739109039307, 4.686707019805908], "yaxis": "y"}],
                        {"coloraxis": {"colorbar": {"title": {"text": "cluster"}}, "colorscale": [[0.0, "rgb(150,0,90)"], [0.125, "rgb(0,0,200)"], [0.25, "rgb(0,25,255)"], [0.375, "rgb(0,152,255)"], [0.5, "rgb(44,255,150)"], [0.625, "rgb(151,255,0)"], [0.75, "rgb(255,234,0)"], [0.875, "rgb(255,111,0)"], [1.0, "rgb(255,0,0)"]]}, "legend": {"tracegroupgap": 0}, "margin": {"t": 60}, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "xaxis": {"anchor": "y", "domain": [0.0, 1.0], "title": {"text": "x"}}, "yaxis": {"anchor": "x", "domain": [0.0, 1.0], "title": {"text": "y"}}},
                        {"responsive": true}
                    ).then(function(){
                            
var gd = document.getElementById('b9808ca4-d69d-4426-a11a-fcda022327f6');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })
                };
                });
            </script>
        </div>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>doc_id</th>
      <th>file</th>
      <th>text</th>
      <th>tokens</th>
      <th>phrase</th>
      <th>vec</th>
      <th>cluster</th>
      <th>id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>test_data/corpus/doc0.txt</td>
      <td>I felt guilt because I was caught out lying ab...</td>
      <td>[felt, guilt, caught, lying, diary, engagement...</td>
      <td>[felt, guilt, caught, lying, diary, engagement...</td>
      <td>[11.62881, 1.3486317, 0.97834915, 0.8629884, 0...</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>test_data/corpus/doc1.txt</td>
      <td>I felt joy because my daughter scored in the h...</td>
      <td>[felt, joy, daughter, scored, highest, percent...</td>
      <td>[felt, joy, daughter, scored, highest, percent...</td>
      <td>[1.213225, 10.003742, 0.7914655, 0.81080633, 1...</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>test_data/corpus/doc2.txt</td>
      <td>I felt guilt by not letting my sister help me ...</td>
      <td>[felt, guilt, letting, sister, help, sort, bed...</td>
      <td>[felt, guilt, letting, sister, help, sort, bed...</td>
      <td>[1.1528286, 1.1788816, 11.766063, 0.78507185, ...</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>test_data/corpus/doc3.txt</td>
      <td>I felt sadness that a friend's pet rabbit had ...</td>
      <td>[felt, sadness, friend, pet, rabbit, put, slee...</td>
      <td>[felt, sadness, friend, pet, rabbit, put, slee...</td>
      <td>[0.7984834, 0.93263483, 0.6422852, 9.957755, 0...</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>test_data/corpus/doc4.txt</td>
      <td>I felt guilt when I bumped into a neighbour in...</td>
      <td>[felt, guilt, bumped, neighbour, supermarket, ...</td>
      <td>[felt, guilt, bumped, neighbour, supermarket, ...</td>
      <td>[0.92004925, 1.3586034, 0.7134869, 0.7880912, ...</td>
      <td>0</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

